(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6cf6"],{"/umX":function(t,e,a){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("9dlP"));e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},EXO7:function(t,e,a){"use strict";var n=a("RTY9");a.n(n).a},RTY9:function(t,e,a){},WQUd:function(t,e,a){"use strict";a.r(e);var n=a("omC7"),o=a.n(n),s=a("/umX"),l=a.n(s),r={data:function(){var t;return t={permission:[],showSave:1,showSearch:!1,isShow:1,PutInStorageModel:!1,putInReturn:!1,open_new_rult:!1,typeAndBarCode:{type:"",bar_code:""},formInline:{document_num:"",startDate:"",endDate:"",user_id:"",member_id:"",status:100,type:100},can_return:!0,forMation:{},newTableData:[],data:[],memberInfo:{},forMations:{},newTableDatas:[],color:[],size:[],sku_data:[],specificationOfGoods:[{color:"",size:"",stock:"",total_price:""}],disabled:!1,per_page:10,page:1,total:0,PutInStorageId:"",can_update:!1,memberList:[],loading:!1,accountFrom:{},seller:[],datas:[]},l()(t,"PutInStorageModel",!1),l()(t,"bar_code",""),l()(t,"need_pay",""),l()(t,"stock",""),l()(t,"status",0),l()(t,"StaticGetBillingUser",[]),l()(t,"memberList",[]),t},created:function(){this.ajaxjson(),this.getSeller(),this.getStaticGetBillingUser();var t=sessionStorage.getItem("permission").split(",");this.permission=t},methods:{remoteMethod:function(t){var e=this;if(""!==t){this.loading=!0;var a={search:t,page:1};this.$post(this.$memberSearchMember,a).then(function(t){0==t.status_code?(e.memberList=t.data,e.loading=!1):e.$message({type:"error",message:t.message})})}else this.memberList=[]},selectPhone:function(t){for(var e=this.$coppyArray(this.memberList),a=0;a<e.length;a++)t==e[a].id&&(this.memberInfo=e[a])},cancelpay:function(){this.PutInStorageModel=!1},sumAmountPayable:function(){var t=0;t=(t=this.accountFrom.need_pay*this.accountFrom.discount-this.accountFrom.preferential).toFixed(2),this.accountFrom.payment=t},sumpay:function(){for(var t=0,e=0;e<this.accountFrom.payment_method.length;e++)t+=Number(this.accountFrom.payment_method[e].amount);if(t=t.toFixed(2),this.accountFrom.total_payment=t,this.accountFrom.total_payment>this.accountFrom.payment){var a=this.accountFrom.total_payment-this.accountFrom.payment;this.accountFrom.give_change=a}else this.accountFrom.give_change=0},ajaxjson:function(){var t=this,e=this.formInline;e.per_page=this.per_page,e.page=this.page,this.$post(this.$retailopenbillList,e).then(function(e){0==e.status_code?(t.data=e.data.data,t.total=e.data.total,t.per_page=e.data.per_page):t.$message({type:"error",message:e.message})})},deletes:function(t){var e={id:t};this.$delete(this.$retailopenbillDelete,e)},selectSupplier:function(t){var e=this;1==t?this.$post(this.$inventoryAllReserve).then(function(t){if(0==t.status_code){for(var a=t.data,n=0;n<a.length;n++)a[n].number=a[n].reserve_count,a[n].price=a[n].tag_price/100,a[n].inventory_number=0,a[n].contrast_number=0,a[n].contrast_money=0;e.newTableData=a,console.log(a)}}):console.log("抽盘")},getStaticGetBillingUser:function(){var t=this,e={shop_id:sessionStorage.getItem("shop_id")};this.$post(this.$staticGetBillingUser,e).then(function(e){0==e.status_code&&(t.StaticGetBillingUser=e.data.user_list)})},getSeller:function(){var t=this;this.$post(this.$retailopenbillGetSeller).then(function(e){0==e.status_code&&(t.seller=e.data)})},multiply:function(t){t.unit_price=Number(t.discount)*Number(t.price),t.total_price=Number(t.stock)*Number(t.unit_price),t.total_really_money=Number(t.stock)*Number(t.unit_price)},handleSizeChange:function(t){this.per_page=t,this.ajaxjson()},handleCurrentChange:function(t){this.page=t,this.ajaxjson()},indexMethod:function(t){return(this.page-1)*this.per_page+t+1},getSummaries_1:function(t){var e=t.columns,a=t.data,n=[],o=[];return e.forEach(function(t,e){0!==e?("stock"===t.property&&(o=a.map(function(t){return Number(t.stock)})),"payment"===t.property&&(o=a.map(function(t){return Number(t.payment)})),"stock"==t.property||"payment"==t.property?(n[e]=o.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),n[e]+=""):n[e]="--"):n[e]="总计"}),n[4]=n[4]/100,n},goToSeeEditor:function(t){var e=this,a={id:t.id};1==t.type?(this.showSave=1,this.PutInStorageId=t.id,this.$post(this.$retailopenbillinfo,a).then(function(t){if(0==t.status_code){e.forMation=t.data,e.newTableData=t.data.goodsData;for(var a=0;a<e.newTableData.length;a++)e.newTableData[a].discount=e.newTableData[a].discount/100;e.isShow=2,e.can_update=t.data.can_update,e.can_return=t.data.can_return}else e.$message({type:"error",message:t.message})})):(this.showSave=0,this.PutInStorageId=t.id,this.$post(this.$retailopenbillinfo,a).then(function(t){0==t.status_code?(e.forMations=t.data,e.memberInfo=e.forMations.memberInfo,e.datas=t.data.goodsData,e.status=t.data.status,e.can_update=t.data.can_update,e.can_return=t.data.can_return,e.isShow=3):e.$message({type:"error",message:t.message})}))},addgoods:function(t){var e=this,a={type:"1",bar_code:this.bar_code};this.$post(this.$staticGetCodeGoods,a).then(function(t){if(0==t.status_code){var a=t.data;a.norm=a.specnamestr,a.stock=1,a.price=a.sku_price,a.discount=e.memberInfo.discount/100,a.unit_price=Number(a.discount)*Number(a.price),a.total_price=Number(a.stock)*Number(a.unit_price),a.total_really_money=Number(a.stock)*Number(a.unit_price),a.total_really_money=a.total_really_money/100;for(var n=!0,o=0;o<e.datas.length;o++)a.sku_id==e.datas[o].sku_id&&(n=!1);n?e.datas.push(a):e.$message({type:"error",message:"您已经添加过该商品了"})}else e.$message({type:"error",message:t.message})})},reduceRow:function(t){this.specificationOfGoods.splice(t,1)},closeAnAbccount:function(){var t=this,e={id:this.PutInStorageId};this.$post(this.$retailopenbillPayInfo,e).then(function(e){0==e.status_code&&(t.accountFrom=e.data,t.PutInStorageModel=!0)})},pay:function(){var t=this;console.log("执行到此");for(var e=this.$objDeepCopy(this.accountFrom),a=this.$coppyArray(this.accountFrom.payment_method),n=0;n<a.length;n++)a[n].amount=100*Number(a[n].amount);e.payment_method=o()(a),e.payment=100*e.payment,e.discount=100*e.discount,e.preferential=100*e.preferential,e.need_pay=100*e.need_pay,e.total_payment=100*e.total_payment,e.give_change=100*e.give_change,this.$post(this.$retailopenbillComplete,e).then(function(e){0==e.status_code?(t.$message({type:"success",message:e.message}),t.isShow=1,t.datas=[],t.bar_code="",t.ajaxjson(),t.forMations={}):t.$message({type:"error",message:e.message})})},upDataAbccount:function(){var t=this,e={id:this.PutInStorageId,stock:this.stock,need_pay:100*this.need_pay,goodsData:""},a=this.$coppyArray(this.datas);e.goodsData=o()(a),this.$post(this.$retailopenbillUpdate,e).then(function(e){var a={id:e.data.rob_id};t.$post(t.$retailopenbillPayInfo,a).then(function(e){0==e.status_code?(t.accountFrom=e.data,t.accountFrom.discount=t.accountFrom.discount/100,t.accountFrom.payment=t.accountFrom.payment/100,t.accountFrom.need_pay=t.accountFrom.need_pay/100,t.accountFrom.preferential>0?t.canchange=!0:t.canchange=!1,t.PutInStorageModel=!0):t.$message({type:"error",message:e.message})})})},getSummaries:function(t){var e=this,a=t.columns,n=t.data,o=[],s=[];return a.forEach(function(t,a){0!==a?("stock"===t.property&&(s=n.map(function(t){return Number(t.stock)})),"total_price"===t.property&&(s=n.map(function(t){return Number(t.total_price)})),"stock"==t.property?(o[a]=s.reduce(function(t,a){var n=Number(a);return isNaN(n)?(e.stock=t,t):(e.stock=t+a,t+a)},0),o[a]+=""):"total_price"==t.property?(o[a]=s.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),o[a]+=""):o[a]="--"):o[a]="总计"}),this.need_pay=o[7]/100,o[7]=o[7]/100,o},resetForm:function(t){this.formInline={startDate:"",endDate:"",user_id:"",member_id:"",status:100,type:100},this.ajaxjson()},back_PurchseMan:function(){this.isShow=1},cancel_new_rult:function(){this.open_new_rult=!1},deleteAdd:function(){console.log("删除!")},salesReturn:function(){this.putInReturn=!0},sure:function(){var t=this,e={rob_id:this.PutInStorageId};this.$post(this.$retailopenbillReturn,e).then(function(e){0==e.status_code?(t.$message({type:"success",message:e.message}),t.ajaxjson()):t.$message({type:"error",message:e.message}),t.putInReturn=!1})},cancelPutInStorage:function(){this.putInReturn=!1}}},i=(a("EXO7"),a("g2MH"),a("ZrdR")),c=Object(i.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.isShow,expression:"isShow == 1"}],staticClass:"tab-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0},model:{value:t.formInline,callback:function(e){t.formInline=e},expression:"formInline"}},[a("div",{staticClass:"title"},[a("el-row",[a("el-col",[a("el-input",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{placeholder:"输入单据号"},model:{value:t.formInline.document_num,callback:function(e){t.$set(t.formInline,"document_num",e)},expression:"formInline.document_num"}},[a("el-button",{staticStyle:{"background-color":"#e0e0e0","border-radius":"0px"},attrs:{slot:"append",type:"primary"},on:{click:t.ajaxjson},slot:"append"},[a("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"icon_search"}}),a("span",[t._v("搜索")])],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showSearch=!t.showSearch}}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"filter"}}),t._v(" "),a("span",[t._v("筛选订单")])],1)],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}],staticClass:"search"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formInline.startDate,callback:function(e){t.$set(t.formInline,"startDate",e)},expression:"formInline.startDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formInline.endDate,callback:function(e){t.$set(t.formInline,"endDate",e)},expression:"formInline.endDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"制单人"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInline.user_id,callback:function(e){t.$set(t.formInline,"user_id",e)},expression:"formInline.user_id"}},t._l(t.StaticGetBillingUser,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"会员"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.remoteMethod,loading:t.loading},on:{change:t.selectPhone},model:{value:t.formInline.member_id,callback:function(e){t.$set(t.formInline,"member_id",e)},expression:"formInline.member_id"}},t._l(t.memberList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据状态"}},[a("el-radio-group",{model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},[a("el-radio",{attrs:{label:100}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("已付款")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("未付款")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{model:{value:t.formInline.type,callback:function(e){t.$set(t.formInline,"type",e)},expression:"formInline.type"}},[a("el-radio",{attrs:{label:100}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("零售")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("退货")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"bottomButton",attrs:{align:"center"}},[a("el-form-item",{attrs:{label:" ",align:"center"}},[a("el-button",{attrs:{name:"cancel"},on:{click:t.resetForm}},[t._v("清空")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.ajaxjson}},[t._v("确定")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"tTable",attrs:{id:"printMe"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,stripe:"",border:"","show-summary":"","summary-method":t.getSummaries_1,size:"mini"}},[a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",fixed:"",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"document_num",label:"单据号",fixed:"",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1!=t.permission.indexOf("244")?a("span",{staticStyle:{color:"#18CCBA",cursor:"pointer"},on:{click:function(a){t.goToSeeEditor(e.row)}}},[t._v(t._s(e.row.document_num))]):a("span",{staticStyle:{color:"#18CCBA",cursor:"pointer"}},[t._v(t._s(e.row.document_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"单据日期",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"总数量",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payment",label:"总金额",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.payment/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"member_name",label:"会员",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"preferential",label:"优惠金额",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sales_name",label:"营业员",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"单据类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?a("span",{attrs:{type:"text"}},[t._v("销售开单")]):t._e(),t._v(" "),1==e.row.type?a("span",{attrs:{type:"text"}},[t._v("退单")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"单据状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",{attrs:{type:"text"}},[t._v("未支付")]):t._e(),t._v(" "),1==e.row.status?a("span",{attrs:{type:"text"}},[t._v("已支付")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",width:"100",align:"center",label:"收银员"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",width:"100",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.type&&0==e.row.status&&-1!=t.permission.indexOf("259"),expression:"scope.row.type == 0&&scope.row.status==0&&permission.indexOf('259') != -1"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deletes(e.row.id)}}},[t._v("\n\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.putInReturn,expression:"putInReturn"}],staticClass:"model"},[a("div",{staticClass:"PutInStorage"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[t._v("\n\t\t\t\t\t退单\n\t\t\t\t")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"text",name:"topRightCancel"},on:{click:t.cancelPutInStorage}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"text",attrs:{span:24}},[t._v("\n\t\t\t\t\t确定退单?\n\t\t\t\t")])],1),t._v(" "),a("el-row",{staticClass:"bottom bottomButton"},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{name:"cancel"},on:{click:t.cancelPutInStorage}},[t._v("\n\t\t\t\t\t\t取消\n\t\t\t\t\t")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("\n\t\t\t\t\t\t确定\n\t\t\t\t\t")])],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.isShow,expression:"isShow == 2"}],staticClass:"tab-container"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[t._v("\n\t\t\t\t销售订单\n\t\t\t")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"text"},on:{click:t.back_PurchseMan}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"title"},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.disabled,expression:"!disabled"}]},[a("el-col",{attrs:{span:24}},[t.can_return?a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=t.permission.indexOf("245"),expression:"permission.indexOf('245') != -1"}],attrs:{type:"primary"},on:{click:t.salesReturn}},[t._v("退单")]):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"search1"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0,model:t.forMation}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据号"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"",disabled:""},model:{value:t.forMation.document_num,callback:function(e){t.$set(t.forMation,"document_num",e)},expression:"forMation.document_num"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.forMation.created_at,callback:function(e){t.$set(t.forMation,"created_at",e)},expression:"forMation.created_at"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"摘要"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"",disabled:""},model:{value:t.forMation.abstract,callback:function(e){t.$set(t.forMation,"abstract",e)},expression:"forMation.abstract"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"制单人",disabled:""}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"",disabled:""},model:{value:t.forMation.sales_name,callback:function(e){t.$set(t.forMation,"sales_name",e)},expression:"forMation.sales_name"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"tTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newTableData,stripe:"",border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"barcode",label:"条形码",fixed:"",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品规格名称",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"数量",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"吊牌价",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.price/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"折扣",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unit_price",label:"折后价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.unit_price/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"total_price",label:"小计",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.total_price/100).toFixed(2)))])]}}])})],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.isShow,expression:"isShow == 3"}],staticClass:"tab-container"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[t._v("\n\t\t\t\t销售订单\n\t\t\t")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"text",name:"topRightCancel"},on:{click:t.back_PurchseMan}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"tab-container"},[a("div",{staticClass:"title"},[a("el-row",[t.can_return?a("el-col",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=t.permission.indexOf("245"),expression:"permission.indexOf('245') != -1"}],attrs:{type:"primary"},on:{click:t.salesReturn}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_return"}}),t._v(" "),a("span",[t._v("退单")])],1)],1):a("el-col",[0==t.status?a("span",[t.can_update?a("el-button",{attrs:{type:"primary"},on:{click:t.upDataAbccount}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_turn"}}),t._v(" "),a("span",[t._v("结算")])],1):a("el-button",{attrs:{type:"primary"},on:{click:t.closeAnAbccount}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_turn"}}),t._v(" "),a("span",[t._v("结算")])],1)],1):t._e()])],1)],1),t._v(" "),a("div",{staticClass:"search1"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0},model:{value:t.forMations,callback:function(e){t.forMations=e},expression:"forMations"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据号"}},[a("el-input",{attrs:{placeholder:"请输入单据号",disabled:""},model:{value:t.forMations.document_num,callback:function(e){t.$set(t.forMations,"document_num",e)},expression:"forMations.document_num"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:""},model:{value:t.forMations.created_at,callback:function(e){t.$set(t.forMations,"created_at",e)},expression:"forMations.created_at"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"会员"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.memberInfo.name,callback:function(e){t.$set(t.memberInfo,"name",e)},expression:"memberInfo.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"营业员"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.forMations.sales_name,callback:function(e){t.$set(t.forMations,"sales_name",e)},expression:"forMations.sales_name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"摘要"}},[a("el-input",{attrs:{disabled:""},model:{value:t.forMations.remark,callback:function(e){t.$set(t.forMations,"remark",e)},expression:"forMations.remark"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收银员"}},[a("el-input",{attrs:{disabled:""},model:{value:t.forMations.user_name,callback:function(e){t.$set(t.forMations,"user_name",e)},expression:"forMations.user_name"}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"search2",staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"text"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"400px"},attrs:{disabled:!t.can_update,placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addgoods(e):null}},model:{value:t.bar_code,callback:function(e){t.bar_code=e},expression:"bar_code"}})],1)],1),t._v(" "),a("div",{staticClass:"tTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas,stripe:"",border:"",size:"mini","show-summary":"","summary-method":t.getSummaries}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"barcode",label:"条形码",fixed:"",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"norm",label:"商品名称规格",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.goods_name)+","+t._s(e.row.norm)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"数量",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.can_update?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){t.multiply(e.row)}},model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}}):a("span",[t._v(t._s(e.row.stock))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"吊牌价",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.price/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",width:"150",label:"折扣",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.can_update?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){t.multiply(e.row)}},model:{value:e.row.discount,callback:function(a){t.$set(e.row,"discount",a)},expression:"scope.row.discount"}}):a("span",[t._v(t._s(e.row.discount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"unit_price",width:"150",label:"折后价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.unit_price/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"total_price",label:"小计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.total_price/100).toFixed(2)))])]}}])})],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.PutInStorageModel,expression:"PutInStorageModel"}],staticClass:"model"},[a("div",{staticClass:"model_con"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[t._v("\n\t\t\t\t\t\t结账\n\t\t\t\t\t")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"text",name:"topRightCancel"},on:{click:t.cancelpay}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0},model:{value:t.accountFrom,callback:function(e){t.accountFrom=e},expression:"accountFrom"}},[a("el-row",[a("el-row",[a("el-col",{staticClass:"title",attrs:{span:24}},[a("svg-icon",{attrs:{"icon-class":"dot"}}),t._v("支付金额\n\t\t\t\t\t\t\t")],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合计金额"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.accountFrom.need_pay,callback:function(e){t.$set(t.accountFrom,"need_pay",e)},expression:"accountFrom.need_pay"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"整单打折"}},[a("el-input",{attrs:{placeholder:"",disabled:!t.can_update},on:{blur:t.sumAmountPayable},model:{value:t.accountFrom.discount,callback:function(e){t.$set(t.accountFrom,"discount",e)},expression:"accountFrom.discount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠金额"}},[a("el-input",{attrs:{placeholder:"",disabled:!t.can_update},on:{blur:t.sumAmountPayable},model:{value:t.accountFrom.preferential,callback:function(e){t.$set(t.accountFrom,"preferential",e)},expression:"accountFrom.preferential"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"应付金额"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.accountFrom.payment,callback:function(e){t.$set(t.accountFrom,"payment",e)},expression:"accountFrom.payment"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"title",attrs:{span:24}},[a("svg-icon",{attrs:{"icon-class":"dot"}}),t._v("支付方式\n\t\t\t\t\t\t\t")],1),t._v(" "),t._l(t.accountFrom.payment_method,function(e,n){return a("el-col",{key:e.id,attrs:{span:12}},[a("el-form-item",{attrs:{label:e.name}},[a("el-input",{attrs:{placeholder:""},on:{blur:t.sumpay},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})],1)],1)}),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"付款合计"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.accountFrom.total_payment,callback:function(e){t.$set(t.accountFrom,"total_payment",e)},expression:"accountFrom.total_payment"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"找零"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.accountFrom.give_change,callback:function(e){t.$set(t.accountFrom,"give_change",e)},expression:"accountFrom.give_change"}})],1)],1)],2)],1),t._v(" "),a("el-row",{staticClass:"bottom bottomButton"},[a("el-col",{attrs:{span:24,align:"center"}},[a("el-button",{attrs:{name:"cancel"},on:{click:t.cancelpay}},[t._v("\n\t\t\t\t\t\t\t\t取消\n\t\t\t\t\t\t\t")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.pay}},[t._v("\n\t\t\t\t\t\t\t\t确定\n\t\t\t\t\t\t\t")])],1)],1)],1)],1)])],1)])},[],!1,null,"6a02a6e1",null);c.options.__file="sales.vue";e.default=c.exports},g2MH:function(t,e,a){"use strict";var n=a("wXd/");a.n(n).a},"wXd/":function(t,e,a){}}]);