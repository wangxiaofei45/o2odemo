(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1254"],{"/fcc":function(e,t,a){},aOr0:function(e,t,a){"use strict";var s=a("/fcc");a.n(s).a},aWao:function(e,t,a){},etw7:function(e,t,a){"use strict";a.r(t);var s=a("omC7"),i=a.n(s),n=a("6ZY3"),o=a.n(n),r={data:function(){return{isAdd:!1,audit_id:"",canaudit:!1,canAmend:!0,permission:[],page:1,total:0,per_page:10,seachModel:!1,isShow:1,fromAndSave:!1,modelShow:-1,currentPage4:4,formInline:{document_num:"",startDate:"",endDate:"",cbid:"",user_id:"",audit_status:100},forMation:{},supplierCommonSupplierList:[],StaticGetBillingUser:[],typeAndBarCode:{type:"",bar_code:""},currentVendor:{},open_new_rult:!1,editVisible:!1,data:[],newTableData:[],color:[],size:[],sku_data:[],specificationOfGoods:[{color:"",size:"",stock:"",total_price:""}],purchase_id:""}},created:function(){this.ajaxjson(),this.getSupplierCommonSupplierList(),this.getStaticGetBillingUser();var e=sessionStorage.getItem("permission").split(",");this.permission=e},methods:{ajaxjson:function(){var e=this,t=o()(this.formInline,{per_page:this.per_page,page:this.page});this.$post(this.$purchaseList,t).then(function(t){0==t.status_code?(e.data=t.data.data,e.total=t.data.total,e.per_page=t.data.per_page):e.$message({type:"error",message:t.message})})},getStaticGetBillingUser:function(){var e=this,t={shop_id:sessionStorage.getItem("shop_id")};this.$post(this.$staticGetBillingUser,t).then(function(t){0==t.status_code&&(e.StaticGetBillingUser=t.data.user_list)})},indexMethod:function(e){return(this.page-1)*this.per_page+e+1},reSetForm:function(){this.formInline={document_num:"",startDate:"",endDate:"",cbid:"",user_id:"",audit_status:100},this.ajaxjson()},handleSizeChange:function(e){this.per_page=e,this.ajaxjson()},handleCurrentChange:function(e){this.page=e,this.ajaxjson()},openAudit:function(e){this.id=e,this.modelShow=4},cancel:function(){this.modelShow=-1},sureAudit:function(){this.Audit(this.id)},Audit:function(e){var t=this,a={id:e};this.$post(this.$purchaseAudit,a).then(function(e){0==e.status_code?(t.$message({type:"success",message:e.message}),t.ajaxjson(),t.modelShow=-1):(t.$message({type:"error",message:e.message}),t.modelShow=-1)})},handleDelete:function(e){var t={id:e};this.$delete(this.$purchaseDelete,t)},goToSeeOrModify:function(e){var t=this;if(this.isAdd=!1,0==e.audit_status){var a={id:e.id};this.audit_id=e.id,this.canaudit=!0,this.canAmend=!0,this.$post(this.$purchaseInfo,a).then(function(e){if(0==e.status_code){t.currentVendor.id=e.data.cbid,t.forMation=e.data,t.isShow=2,t.newTableData=e.data.goodsData;for(var a=0;a<t.newTableData.length;a++)t.newTableData[a].price=t.newTableData[a].price/100,t.newTableData[a].discount=t.newTableData[a].discount/100,t.newTableData[a].unit_price=t.newTableData[a].unit_price/100,t.newTableData[a].total_price=t.newTableData[a].total_price/100}})}else{var s={id:e.id};this.canAmend=!1,this.$post(this.$purchaseInfo,s).then(function(e){0==e.status_code&&(t.currentVendor.id=e.data.cbid,t.forMation=e.data,t.isShow=2,t.newTableData=e.data.goodsData,t.canaudit=!1)})}},amend:function(){var e=this,t=this.$objDeepCopy(this.forMation),a=this.$coppyArray(this.newTableData);t.goodsData=i()(a),this.$post(this.$purchaseUpdate,t).then(function(t){0==t.status_code?(e.$message({type:"success",message:t.message}),e.ajaxjson(),e.newTableData=[],e.isShow=1):e.$message({type:"error",message:t.message})})},amendEadit:function(){var e=this,t=this.$objDeepCopy(this.forMation),a=this.$coppyArray(this.newTableData);t.goodsData=i()(a),this.$post(this.$purchaseUpdate,t).then(function(t){if(0==t.status_code){var a={id:t.data.purchase_id};e.$post(e.$purchaseAudit,a).then(function(t){0==t.status_code?(e.$message({type:"success",message:t.message}),e.ajaxjson(),e.newTableData=[],e.isShow=1):e.$message({type:"error",message:t.message})})}else e.$message({type:"error",message:t.message})})},addPurseMan:function(){var e=this;this.isAdd=!0,this.$post(this.$purchaseAdd).then(function(t){if(0==t.status_code){var a={id:t.data.purchase_id};e.purchase_id=t.data.purchase_id,e.$post(e.$purchaseInfo,a).then(function(t){0==t.status_code&&(e.forMation=t.data,e.isShow=2)})}})},getSupplierCommonSupplierList:function(){var e=this;this.$post(this.$supplierCommonSupplierList).then(function(t){0==t.status_code&&(e.supplierCommonSupplierList=t.data)})},selectSupplier:function(e){for(var t=0;t<this.supplierCommonSupplierList.length;t++)e==this.supplierCommonSupplierList[t].id&&(this.currentVendor=this.supplierCommonSupplierList[t])},addgoods:function(){var e=this;if(this.currentVendor.id){var t=this.typeAndBarCode;t.need_stock=0,1==t.type?this.$post(this.$staticGetCodeGoods,t).then(function(t){if(0==t.status_code){var a=t.data;a.stock="",a.discount=e.currentVendor.discounts/100,a.price=a.sku_price/100,a.unit_price=a.price*a.discount,a.goods_name=a.goods_name+"|"+a.specnamestr;for(var s=!0,i=0;i<e.newTableData.length;i++)a.barcode==e.newTableData[i].barcode&&(s=!1);s?e.newTableData.push(a):e.$message({type:"error",message:"您已经添加过该商品了"})}else e.$message({type:"error",message:t.message})}):2==t.type&&this.$post(this.$staticGetCodeGoods,t).then(function(t){0==t.status_code?(e.color=t.data.sale_attrs[0].data,e.size=t.data.sale_attrs[1].data,e.sku_data=t.data.sku_data,e.open_new_rult=!0):e.$message({type:"error",message:t.message})})}else this.$message({type:"error",message:"请先选择供应商"})},sureColor:function(e,t,a){if(t.size){for(var s=!0,i=t.color+"|"+t.size,n=0;n<this.specificationOfGoods.length;n++)this.specificationOfGoods[n].specnamestr==i&&(s=!1);if(s)for(var r=0;r<this.sku_data.length;r++)return void(this.sku_data[r].specnamestr==i&&((t=o()(t,this.sku_data[r])).discount=this.currentVendor.discounts/100,t.price=t.sku_price/100,t.unit_price=t.price*t.discount));else this.$message({type:"error",message:"您已添加过该商品,请勿重复添加!"})}},sureSize:function(e,t,a){if(t.color){for(var s=!0,i=t.color+"|"+t.size,n=0;n<this.specificationOfGoods.length;n++)this.specificationOfGoods[n].specnamestr==i&&(s=!1);if(s)for(var r=0;r<this.sku_data.length;r++)this.sku_data[r].specnamestr==i&&((t=o()(t,this.sku_data[r])).discount=this.currentVendor.discounts/100,t.price=t.sku_price/100,t.unit_price=t.price*t.discount);else this.$message({type:"error",message:"您已添加过该商品,请勿重复添加!"})}},addRow:function(e){if(e.sku_price){this.specificationOfGoods.push({color:"",size:"",stock:"",total_price:""})}else this.$message({type:"error",message:"请先完善该条信息!"})},reduceRow:function(e){this.specificationOfGoods.splice(e,1)},sureAddNext:function(){var e=this.$coppyArray(this.specificationOfGoods),t=this.$coppyArray(this.newTableData),a=[];this.specificationOfGoods=[{color:"",size:"",stock:"",total_price:""}];for(var s=0;s<e.length;s++)if(e[s].goods_name=e[s].goods_name+"|"+e[s].specnamestr,delete e[s].color,delete e[s].size,delete e[s].specnamestr,0==t.length)a.push(e[s]);else for(var i=0;i<t.length;i++)e[s].sku_id==t[i].sku_id?t[i].stock=Number(t[i].stock)+Number(e[s].stock):a.push(e[s]);this.newTableData=t.concat(a)},multiply:function(e,t,a){var s=Number(t.stock)*t.unit_price*100;t.total_price=Math.round(s)/100,this.newTableData.splice(a,t)},saveNotAudit:function(){var e=this,t=this.$coppyArray(this.newTableData);if(t.length){var a={id:this.purchase_id,cbid:this.currentVendor.id,abstract:"",goodsData:i()(t)};this.$post(this.$purchaseUpdate,a).then(function(t){0==t.status_code?(e.$message({type:"success",message:t.message}),e.ajaxjson(),e.newTableData=[],e.isShow=1):e.$message({type:"error",message:t.message})})}else this.$message({type:"error",message:"请先添加商品"})},getSummaries:function(e){var t=e.columns,a=e.data,s=[],i=[];return t.forEach(function(e,t){0!==t?("stock"===e.property&&(i=a.map(function(e){return Number(e.stock)})),"price"===e.property&&(i=a.map(function(e){return Number(e.price)})),"stock"==e.property||"price"==e.property?(s[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),s[t]+=""):s[t]="--"):s[t]="合计"}),s[5]=s[5]/100,s},back_PurchseMan:function(){this.newTableData=[],this.isShow=1},cancel_new_rult:function(){this.open_new_rult=!1},deleteAdd:function(e){this.newTableData.splice(e,1)},Delete:function(){this.isDelete=!0},openSave:function(){var e=this,t=this.$coppyArray(this.newTableData),a={id:this.purchase_id,cbid:this.currentVendor.id,abstract:"",goodsData:i()(t)};this.$post(this.$purchaseUpdate,a).then(function(t){if(0==t.status_code){var a={id:t.data.purchase_id};e.$post(e.$purchaseAudit,a).then(function(t){0==t.status_code?(e.$message({type:"success",message:t.message}),e.ajaxjson(),e.newTableData=[],e.isShow=1):e.$message({type:"error",message:t.message})})}else e.$message({type:"error",message:t.message})})},sureSave:function(){console.log("保存"),this.fromAndSave=!1},cancelSave:function(){this.fromAndSave=!1}}},l=(a("k98s"),a("aOr0"),a("ZrdR")),c=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isShow,expression:"isShow == 1"}],staticClass:"tab-container"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0,model:e.formInline}},[a("div",{staticClass:"title"},[a("el-row",[a("el-col",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("218"),expression:"permission.indexOf('218') != -1"}],staticStyle:{"margin-right":"40px"},attrs:{type:"primary"},on:{click:e.addPurseMan}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"add"}}),e._v(" "),a("span",[e._v("新增")])],1),e._v(" "),a("el-input",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{placeholder:"输入单据号"},model:{value:e.formInline.document_num,callback:function(t){e.$set(e.formInline,"document_num",t)},expression:"formInline.document_num"}},[a("el-button",{staticStyle:{"background-color":"#e0e0e0","border-radius":"0px"},attrs:{slot:"append",type:"primary"},on:{click:e.ajaxjson},slot:"append"},[a("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"icon_search"}}),a("span",[e._v("搜索")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.seachModel=!e.seachModel}}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"filter"}}),e._v(" "),a("span",[e._v("筛选订单")])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seachModel,expression:"seachModel"}],staticClass:"search"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.cbid,callback:function(t){e.$set(e.formInline,"cbid",t)},expression:"formInline.cbid"}},e._l(e.supplierCommonSupplierList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"制单人"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.user_id,callback:function(t){e.$set(e.formInline,"user_id",t)},expression:"formInline.user_id"}},e._l(e.StaticGetBillingUser,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"单据状态"}},[a("el-radio-group",{model:{value:e.formInline.audit_status,callback:function(t){e.$set(e.formInline,"audit_status",t)},expression:"formInline.audit_status"}},[a("el-radio",{attrs:{label:100}},[e._v("所有")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("已审核")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("未审核")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"titleSearch",attrs:{align:"center"}},[a("el-form-item",{attrs:{label:" ",align:"center"}},[a("el-button",{attrs:{name:"cancel"},on:{click:e.reSetForm}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ajaxjson}},[e._v("确定")])],1)],1)],1)],1)]),e._v(" "),a("div",{staticClass:"tTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"","show-summary":"","summary-method":e.getSummaries,size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,fixed:"",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"document_num",label:"单据号",fixed:"",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=e.permission.indexOf("219")?a("span",{staticStyle:{color:"#18CCBA",cursor:"pointer"},on:{click:function(a){e.goToSeeOrModify(t.row)}}},[e._v(e._s(t.row.document_num))]):a("span",{staticStyle:{color:"#18CCBA",cursor:"pointer"}},[e._v(e._s(t.row.document_num))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"单据日期",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cb_name",label:"供应商",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"总数量",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"总金额",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"audit_status",label:"审核状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.audit_status?a("span",{attrs:{type:"text"}},[e._v("未审核")]):e._e(),e._v(" "),1==t.row.audit_status?a("span",{attrs:{type:"text"}},[e._v("审核通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"制单人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"audit_status",label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.audit_status?[a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("221"),expression:"permission.indexOf('221') != -1"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){e.openAudit(t.row.id)}}},[e._v("审核")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("223"),expression:"permission.indexOf('223') != -1"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]:void 0}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.isShow,expression:"isShow ==2"}],staticClass:"tab-container"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[e.canAmend?a("span",[e.isAdd?a("span",[e._v("新增")]):e._e(),e.isAdd?e._e():a("span",[e._v("编辑")])]):e._e(),e._v("采购订单\n\t\t\t")]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:e.back_PurchseMan}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"title"},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.canAmend,expression:"canAmend"}]},[a("el-col",{attrs:{span:12}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],attrs:{type:"primary"},on:{click:e.saveNotAudit}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_save"}}),e._v(" "),a("span",[e._v("保存")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}],attrs:{type:"primary"},on:{click:e.amend}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_save"}}),e._v(" "),a("span",[e._v("保存")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.canaudit&&-1!=e.permission.indexOf("221"),expression:"!canaudit&&permission.indexOf('221') != -1"}],attrs:{type:"primary"},on:{click:e.openSave}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_review"}}),e._v(" "),a("span",[e._v("审核")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canaudit&&-1!=e.permission.indexOf("221"),expression:"canaudit&&permission.indexOf('221') != -1"}],attrs:{type:"primary"},on:{click:e.amendEadit}},[a("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"icon_review"}}),e._v(" "),a("span",[e._v("审核")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"search1"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px",inline:!0,model:e.forMation}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据号"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.forMation.document_num,callback:function(t){e.$set(e.forMation,"document_num",t)},expression:"forMation.document_num"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:e.forMation.created_at,callback:function(t){e.$set(e.forMation,"created_at",t)},expression:"forMation.created_at"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{placeholder:"请选择供应商",disabled:!e.canAmend},on:{change:e.selectSupplier},model:{value:e.forMation.cbid,callback:function(t){e.$set(e.forMation,"cbid",t)},expression:"forMation.cbid"}},e._l(e.supplierCommonSupplierList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"摘要"}},[a("el-input",{attrs:{placeholder:"",disabled:!e.canAmend},model:{value:e.forMation.abstract,callback:function(t){e.$set(e.forMation,"abstract",t)},expression:"forMation.abstract"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"制单人"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.forMation.user_id,callback:function(t){e.$set(e.forMation,"user_id",t)},expression:"forMation.user_id"}},e._l(e.StaticGetBillingUser,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.canAmend,expression:"canAmend"}],staticClass:"search2",staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"text"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addgoods(t):null}},model:{value:e.typeAndBarCode.bar_code,callback:function(t){e.$set(e.typeAndBarCode,"bar_code",t)},expression:"typeAndBarCode.bar_code"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.typeAndBarCode.type,callback:function(t){e.$set(e.typeAndBarCode,"type",t)},expression:"typeAndBarCode.type"}},[a("el-option",{attrs:{label:"条码",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"货号",value:"2"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"tTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newTableData,stripe:"",border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"barcode",label:"条形码",fixed:"",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称规格",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"数量",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!e.canAmend,size:"small",placeholder:"",align:"center"},on:{change:function(a){e.multiply(a,t.row,t.row.index)}},model:{value:t.row.stock,callback:function(a){e.$set(t.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"吊牌价",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"折扣",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit_price",label:"采购价",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total_price",label:"小计",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canAmend,expression:"canAmend"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteAdd(t.row.index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.open_new_rult,expression:"open_new_rult"}],staticClass:"model"},[a("div",{staticClass:"model_con"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[e._v("\n\t\t\t\t\t\t选择商品明细\n\t\t\t\t\t")]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:e.cancel_new_rult}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"oTable",staticStyle:{"margin-top":"20px"}},[a("el-table",{attrs:{data:e.specificationOfGoods,stripe:"",border:"","max-height":"400",size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"color",label:"颜色",fixed:"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"medium","value-key":"index"},on:{change:function(a){e.sureColor(a,t.row,t.$index)}},model:{value:t.row.color,callback:function(a){e.$set(t.row,"color",a)},expression:"scope.row.color"}},e._l(e.color,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"size",label:"尺码",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"medium"},on:{change:function(a){e.sureSize(a,t.row,t.$index)}},model:{value:t.row.size,callback:function(a){e.$set(t.row,"size",a)},expression:"scope.row.size"}},e._l(e.size,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"数量",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入",align:"center"},model:{value:t.row.stock,callback:function(a){e.$set(t.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"吊牌价",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"折扣",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit_price",label:"采购价",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.specificationOfGoods.length?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.reduceRow(t.$index)}}},[a("svg-icon",{attrs:{"icon-class":"icon_reduce"}})],1):e._e(),e._v(" "),1==e.specificationOfGoods.length||t.$index==e.specificationOfGoods.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.addRow(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"icon_increase"}})],1):e._e()]}}])})],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"bottomButton",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{name:"cancel"},on:{click:e.cancel_new_rult}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:e.sureAddNext}},[e._v("确定")])],1)],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fromAndSave,expression:"fromAndSave"}],staticClass:"model"},[a("div",{staticClass:"save_model_con"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:12}},[e._v("\n\t\t\t\t\t\t提交并审核\n\t\t\t\t\t")]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"text"},on:{click:e.cancelSave}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"20px","text-align":"center","font-size":"14px"}},[e._v("\n\t\t\t\t\t\t确定提交并审核?\n\t\t\t\t\t")]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{span:24}},[a("el-button",{staticStyle:{width:"120px"},on:{click:e.cancelSave}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.sureSave}},[e._v("确定")])],1)],1)],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==e.modelShow,expression:"modelShow ==4"}],staticClass:"model"},[a("div",{staticClass:"save_model_con"},[a("el-row",{staticClass:"model_title"},[a("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px","font-size":"14px"},attrs:{span:12}},[e._v("\n\t\t\t\t\t审核\n\t\t\t\t")]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:e.cancel}},[a("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{height:"100px","line-height":"100px","text-align":"center","font-size":"14px",color:"#333333"}},[e._v("\n\t\t\t\t\t确定审核?\n\t\t\t\t")]),e._v(" "),a("el-col",{staticClass:"bottomButton",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{span:24}},[a("el-button",{attrs:{name:"cancel"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureAudit}},[e._v("确定")])],1)],1)],1)])])},[],!1,null,"bca45428",null);c.options.__file="PurchasingManagement.vue";t.default=c.exports},k98s:function(e,t,a){"use strict";var s=a("aWao");a.n(s).a}}]);