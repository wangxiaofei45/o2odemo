(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e21c"],{"9u00":function(e,t,i){"use strict";i.r(t);var n=["上海","北京","广州","深圳"],s={data:function(){return{model:1,page:1,total:0,per_page:10,permission:[],checkAll:!1,checkedCities:["上海","北京"],cities:n,isIndeterminate:!0,activeName:"second",function_model:!1,function_amend_model:!1,data_1:[],checkGroup:[],checkList:[],anemdCheckList:[],new_info:{role_name:"",allId:""},new_inforules:{role_name:[{required:!0,message:"模块名称为空",trigger:"blur"}]},amend_info:{role_id:"",role_name:"dsada",allId:""},amend_inforules:{role_name:[{required:!0,message:"模块名称为空",trigger:"blur"}]}}},created:function(){this.ajaxjson();var e=sessionStorage.getItem("permission").split(",");this.permission=e},methods:{ajaxjson:function(){var e=this,t={page:this.page,per_page:this.per_page};this.$post(this.$groupList,t).then(function(t){var i=t;0==i.status_code&&(e.total=i.data.total,e.data_1=i.data.data)})},handleSizeChange:function(e){this.per_page=e,this.ajaxjson()},handleCurrentChange:function(e){this.page=e,this.ajaxjson()},indexMethod:function(e){return(this.page-1)*this.per_page+e+1},handleClick:function(e,t){},deletes:function(e){var t={role_id:e};this.$delete(this.$groupDel,t)},open_newInfo:function(){var e=this;this.model=2,this.$post(this.$groupAllRole).then(function(t){0==t.status_code?e.checkGroup=t.data:e.$message({showClose:!0,message:t.errorMsg,type:"error"})})},check1:function(e,t){if(e){for(var i=0;i<t.children.length;i++)if(-1==this.checkList.indexOf(t.children[i].id)){this.checkList.push(t.children[i].id);for(var n=0;n<t.children[i].children.length;n++)-1==this.checkList.indexOf(t.children[i].children[n].id)&&this.checkList.push(t.children[i].children[n].id)}}else{for(var s=[],a=0;a<t.children.length;a++){s.push(t.children[a].id);for(var l=0;l<t.children[a].children.length;l++)s.push(t.children[a].children[l].id)}for(var o=0;o<s.length;o++)this.checkList.splice(this.checkList.indexOf(s[o]),1)}},check2:function(e,t,i){if(e){this.checkList.push(t.id);for(var n=0;n<i.children.length;n++)-1==this.checkList.indexOf(i.children[n].id)&&this.checkList.push(i.children[n].id)}else{for(var s=[],a=0;a<i.children.length;a++)s.push(i.children[a].id);for(var l=0;l<s.length;l++)this.checkList.splice(this.checkList.indexOf(s[l]),1)}},check3:function(e,t,i,n){e&&(this.checkList.push(t.id),this.checkList.push(i.id))},check4:function(e,t){if(e){for(var i=0;i<t.children.length;i++)if(-1==this.anemdCheckList.indexOf(t.children[i].id)){this.anemdCheckList.push(t.children[i].id);for(var n=0;n<t.children[i].children.length;n++)-1==this.anemdCheckList.indexOf(t.children[i].children[n].id)&&this.anemdCheckList.push(t.children[i].children[n].id)}}else{for(var s=[],a=0;a<t.children.length;a++){s.push(t.children[a].id);for(var l=0;l<t.children[a].children.length;l++)s.push(t.children[a].children[l].id)}for(var o=0;o<s.length;o++)this.anemdCheckList.splice(this.anemdCheckList.indexOf(s[o]),1)}},check5:function(e,t,i){if(e){this.anemdCheckList.push(t.id);for(var n=0;n<i.children.length;n++)-1==this.anemdCheckList.indexOf(i.children[n].id)&&this.anemdCheckList.push(i.children[n].id)}else{for(var s=[],a=0;a<i.children.length;a++)s.push(i.children[a].id);for(var l=0;l<s.length;l++)this.anemdCheckList.splice(this.anemdCheckList.indexOf(s[l]),1)}},check6:function(e,t){e&&(this.anemdCheckList.push(t.id),this.anemdCheckList.push(j.id))},submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return console.log("error submit!!"),!1;var n=t.new_info,s=t.checkList.join(",");t.new_info.allId=s,t.$post(t.$groupAdd,n).then(function(i){var n=i;0==n.status_code?(t.$message({type:"success",message:n.message}),t.ajaxjson(),t.$refs[e].resetFields(),t.checkList=[],t.model=1):t.$message({type:"error",message:n.message})})})},amend:function(e){var t=this;this.amend_info.role_id=e.id,this.amend_info.role_name=e.role_name;var i={role_id:e.id};this.$post(this.$groupAllRole,i).then(function(e){if(0==e.status_code){t.checkGroup=e.data;for(var i=e.data,n=[],s=0;s<i.length;s++)if(1==i[s].is_hide&&n.push(i[s].id),i[s].children)for(var a=0;a<i[s].children.length;a++)if(1==i[s].children[a].is_hide&&n.push(i[s].children[a].id),i[s].children[a].children)for(var l=0;l<i[s].children[a].children.length;l++)1==i[s].children[a].children[l].is_hide&&n.push(i[s].children[a].children[l].id);t.anemdCheckList=n,t.model=3,t.amend_info.allId=n.join(","),console.log(t.amend_info)}})},submitamendForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var i=t.amend_info,n=t.anemdCheckList.join(",");i.allId=n,t.$post(t.$groupEdit,i).then(function(e){var i=e;0==i.status_code?(t.$message({type:"success",message:i.message}),t.ajaxjson(),t.model=1):t.$message({type:"error",message:i.message})})})},cancel_newInfo:function(){this.model=1},cancel_amend_newInfo:function(){this.model=1},resetForm:function(e){this.$refs[e].resetFields(),this.checkList=[]},resetamendForm:function(e){this.$refs[e].resetFields(),this.anemdCheckList=[]}}},a=(i("quS+"),i("ZrdR")),l=Object(a.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.model,expression:"model == 1"}]},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("div",{staticClass:"title"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("73"),expression:"permission.indexOf('73') != -1"}],attrs:{type:"primary"},on:{click:e.open_newInfo}},[i("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"add"}}),e._v(" "),i("span",[e._v("新增")])],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data_1,stripe:"",border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"role_name",label:"权限组"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("74"),expression:"permission.indexOf('74') != -1"}],attrs:{size:"mini",type:"primary"},on:{click:function(i){e.amend(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("76"),expression:"permission.indexOf('76') != -1"}],attrs:{size:"mini",type:"danger"},on:{click:function(i){e.deletes(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[i("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.model,expression:"model == 2"}]},[i("div",{staticClass:"model_con"},[i("el-row",{staticClass:"model_title",attrs:{align:"bottom"}},[i("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:8}},[e._v("\n\t\t\t\t\t新增权限\n\t\t\t\t")]),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4,offset:12}},[i("el-button",{attrs:{type:"text",name:"topRightCancel"},on:{click:e.cancel_newInfo}},[i("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),i("el-form",{ref:"new_info",attrs:{model:e.new_info,rules:e.new_inforules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"权限组名称",prop:"role_name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.new_info.role_name,callback:function(t){e.$set(e.new_info,"role_name",t)},expression:"new_info.role_name"}})],1)],1)],1),e._v(" "),i("el-row",{staticClass:"check_group"},[i("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.checkGroup,function(t,n){return i("el-row",{key:t.id,staticStyle:{"border-bottom":"1px solid #e0e0e0","margin-bottom":"25px"}},[i("el-checkbox",{attrs:{label:t.id},on:{change:function(i){e.check1(i,t)}}},[e._v(e._s(t.name))]),e._v(" "),t.children?i("el-row",{key:t.id,staticStyle:{"padding-left":"25px"}},e._l(t.children,function(n){return i("el-row",{key:n.id,staticStyle:{margin:"15px 0px","padding-left":"25px"}},[i("el-checkbox",{attrs:{label:n.id},on:{change:function(i){e.check2(i,t,n)}}},[e._v(e._s(n.name))]),e._v(" "),i("el-row",{staticStyle:{margin:"15px 0px","padding-left":"25px"}},e._l(n.children,function(s){return i("el-checkbox",{key:s.id,attrs:{label:s.id},on:{change:function(i){e.check3(i,t,n,s)}}},[e._v(e._s(s.name))])}))],1)})):e._e()],1)}))],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"bottomButton",attrs:{span:24}},[i("el-form-item",[i("el-button",{attrs:{name:"cancel"},on:{click:function(t){e.resetForm("new_info")}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("new_info")}}},[e._v("保存")])],1)],1)],1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.model,expression:"model == 3"}]},[i("div",{staticClass:"model_con"},[i("el-row",{staticClass:"model_title",attrs:{align:"bottom"}},[i("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:8}},[e._v("\n\t\t\t\t\t修改权限\n\t\t\t\t")]),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4,offset:12}},[i("el-button",{attrs:{type:"text",name:"topRightCancel"},on:{click:e.cancel_amend_newInfo}},[i("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),i("el-form",{ref:"amend_info",attrs:{model:e.amend_info,rules:e.amend_inforules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"权限组名称",prop:"role_name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.amend_info.role_name,callback:function(t){e.$set(e.amend_info,"role_name",t)},expression:"amend_info.role_name"}})],1)],1)],1),e._v(" "),i("el-row",{staticClass:"check_group"},[i("el-checkbox-group",{model:{value:e.anemdCheckList,callback:function(t){e.anemdCheckList=t},expression:"anemdCheckList"}},e._l(e.checkGroup,function(t,n){return i("el-row",{key:t.id,staticStyle:{"border-bottom":"1px solid #e0e0e0","margin-bottom":"25px"}},[i("el-checkbox",{attrs:{label:t.id},on:{change:function(i){e.check4(i,t)}}},[e._v(e._s(t.name))]),e._v(" "),t.children?i("el-row",{key:t.id,staticStyle:{"padding-left":"25px"}},e._l(t.children,function(n){return i("el-row",{key:n.id,staticStyle:{margin:"15px 0px","padding-left":"25px"}},[i("el-checkbox",{attrs:{label:n.id},on:{change:function(i){e.check5(i,t,n)}}},[e._v(e._s(n.name))]),e._v(" "),i("el-row",{staticStyle:{margin:"15px 0px","padding-left":"25px"}},e._l(n.children,function(s){return i("el-checkbox",{key:s.id,attrs:{label:s.id},on:{change:function(i){e.check6(i,t,n,s)}}},[e._v(e._s(s.name))])}))],1)})):e._e()],1)}))],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"bottomButton",attrs:{span:24}},[i("el-form-item",[i("el-button",{attrs:{name:"cancel"},on:{click:function(t){e.resetamendForm("amend_info")}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitamendForm("amend_info")}}},[e._v("保存")])],1)],1)],1)],1)],1)])])},[],!1,null,"3117b529",null);l.options.__file="permissionSetting.vue";t.default=l.exports},pZEN:function(e,t,i){},"quS+":function(e,t,i){"use strict";var n=i("pZEN");i.n(n).a}}]);