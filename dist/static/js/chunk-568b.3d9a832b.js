(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-568b"],{"4eQK":function(e,t,i){},ZJml:function(e,t,i){"use strict";var n=i("4eQK");i.n(n).a},dQRe:function(e,t,i){},gnJK:function(e,t,i){"use strict";i.r(t);var n=i("X4fA"),s={data:function(){return{permission:[],radio:"1",checkGroup:[],checkList:[],anemdCheckList:[],checkAll:!1,checkedCities:["上海","北京"],isIndeterminate:!0,activeName:"second",options:[],showModel:1,data_1:[],new_info:{name:"",idstr:"",type:"",shop_id:""},new_inforules:{name:[{required:!0,message:"权限组名称为空",trigger:"blur"}]},amend_info:{name:"",idstr:"",type:"",shop_id:""},amend_inforules:{name:[{required:!0,message:"模块名称为空",trigger:"blur"}]},shop_id:"",shop_type:"",page:1,total:0,per_page:10,currentPage4:4}},created:function(){this.ajaxjson(),this.shop_type=Object(n.a)();var e=sessionStorage.getItem("permission").split(",");this.permission=e},methods:{ajaxjson:function(){var e=this,t={page:this.page,per_page:this.per_page};this.$post(this.$organizationRolelist,t).then(function(t){var i=t;0==i.status_code&&(e.data_1=i.data.data,e.total=i.data.total)})},handleSizeChange:function(e){this.per_page=e,this.ajaxjson()},handleCurrentChange:function(e){this.page=e,this.ajaxjson()},deletes:function(e){var t={role_id:e};this.$delete(this.$organizationRoleDelete,t)},open_newInfo:function(){var e=this;this.showModel=2;var t={type:this.radio,role_id:this.role_id};this.$post(this.$organizationRolenode,t).then(function(t){var i=t;0==i.status_code&&(e.checkGroup=i.data)})},checkRadio:function(e){var t=this;if(2==e)this.$post(this.$organizationGetCompanyShop).then(function(e){var i=e;0==i.status_code?t.options=e.data:t.$message.error(i.message)});else{var i={type:this.radio,role_id:this.role_id};this.options=[],this.shop_id="",this.$post(this.$organizationRolenode,i).then(function(e){var i=e;0==i.status_code&&(t.checkGroup=i.data)})}},check1:function(e,t){if(e){for(var i=0;i<t.children.length;i++)if(-1==this.checkList.indexOf(t.children[i].id)&&(this.checkList.push(t.children[i].id),t.children[i].children))for(var n=0;n<t.children[i].children.length;n++)-1==this.checkList.indexOf(t.children[i].children[n].id)&&this.checkList.push(t.children[i].children[n].id)}else{var s=[];if(t.children.length)for(var a=0;a<t.children.length;a++)if(s.push(t.children[a].id),t.children[a].children)for(var o=0;o<t.children[a].children.length;o++)s.push(t.children[a].children[o].id);for(var r=0;r<s.length;r++)this.checkList.splice(this.checkList.indexOf(s[r]),1)}var c=this.checkList.join(",");this.new_info.idstr=c},check2:function(e,t,i){if(e){this.checkList.push(t.id);for(var n=0;n<i.children.length;n++)-1==this.checkList.indexOf(i.children[n].id)&&this.checkList.push(i.children[n].id)}else{for(var s=[],a=0;a<i.children.length;a++)s.push(i.children[a].id);for(var o=0;o<s.length;o++)this.checkList.splice(this.checkList.indexOf(s[o]),1)}var r=this.checkList.join(",");this.new_info.idstr=r},check3:function(e,t,i,n){e&&(this.checkList.push(t.id),this.checkList.push(i.id));var s=this.checkList.join(",");this.new_info.idstr=s},check4:function(e,t){if(e){for(var i=0;i<t.children.length;i++)if(-1==this.anemdCheckList.indexOf(t.children[i].id)){this.anemdCheckList.push(t.children[i].id);for(var n=0;n<t.children[i].children.length;n++)-1==this.anemdCheckList.indexOf(t.children[i].children[n].id)&&this.anemdCheckList.push(t.children[i].children[n].id)}}else{for(var s=[],a=0;a<t.children.length;a++){s.push(t.children[a].id);for(var o=0;o<t.children[a].children.length;o++)s.push(t.children[a].children[o].id)}for(var r=0;r<s.length;r++)this.anemdCheckList.splice(this.anemdCheckList.indexOf(s[r]),1)}var c=this.anemdCheckList.join(",");this.amend_info.idstr=c},check5:function(e,t,i){if(e){this.anemdCheckList.push(t.id);for(var n=0;n<i.children.length;n++)-1==this.anemdCheckList.indexOf(i.children[n].id)&&this.anemdCheckList.push(i.children[n].id)}else{for(var s=[],a=0;a<i.children.length;a++)s.push(i.children[a].id);for(var o=0;o<s.length;o++)this.anemdCheckList.splice(this.anemdCheckList.indexOf(s[o]),1)}var r=this.anemdCheckList.join(",");this.amend_info.idstr=r},check6:function(e,t){e&&(this.anemdCheckList.push(t.id),this.anemdCheckList.push(j.id));var i=this.anemdCheckList.join(",");this.amend_info.idstr=i},selectShopId:function(){var e=this,t={type:this.radio,shop_id:this.shop_id};this.$post(this.$organizationRolenode,t).then(function(t){var i=t;0==i.status_code&&(e.checkGroup=i.data)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return console.log("error submit!!"),!1;var n=t.$objDeepCopy(t.new_info);n.type=t.radio,t.$post(t.$organizationAddrole,n).then(function(i){var n=i;0==n.status_code?(t.$message({type:"success",message:n.message}),t.ajaxjson(),t.showModel=1,t.$refs[e].resetFields(),t.checkList=[]):t.$message({type:"error",message:n.message})})})},submitamendForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var i=t.$objDeepCopy(t.amend_info);t.$post(t.$organizationRoleUpdate,i).then(function(e){var i=e;0==i.status_code?(t.$message({type:"success",message:i.message}),t.ajaxjson(),t.showModel=1):t.$message({type:"error",message:i.message})})})},cancel_newInfo:function(e){this.showModel=1,this.$refs[e].resetFields(),this.checkList=[]},amend:function(e){var t=this,i={type:this.radio,role_id:e.id};this.$post(this.$organizationRolenode,i).then(function(i){var n=i;if(0==n.status_code){for(var s=i.data,a=[],o=0;o<s.length;o++)if(1==s[o].is_hide&&a.push(s[o].id),s[o].children)for(var r=0;r<s[o].children.length;r++)if(1==s[o].children[r].is_hide&&(a.push(s[o].children[r].id),s[o].children[r].children))for(var c=0;c<s[o].children[r].children.length;c++)1==s[o].children[r].children[c].is_hide&&a.push(s[o].children[r].children[c].id);t.anemdCheckList=a,t.checkGroup=n.data,t.showModel=3,t.amend_info.name=e.role_name,t.amend_info.idstr=a.join(","),t.amend_info.type=e.is_shop?"0":"1",t.amend_info.role_id=e.id}})},cancel_amend_newInfo:function(){this.showModel=1},resetForm:function(e){this.$refs[e].resetFields(),this.checkList=[]},resetamendForm:function(e){this.$refs[e].resetFields(),this.anemdCheckList=[]}}},a=(i("ZJml"),i("vkHz"),i("ZrdR")),o=Object(a.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showModel,expression:"showModel == 1"}]},[i("div",{staticClass:"title"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("201"),expression:"permission.indexOf('201') != -1"}],attrs:{type:"primary"},on:{click:e.open_newInfo}},[i("svg-icon",{staticStyle:{"margin-right":"10px"},attrs:{"icon-class":"add"}}),e._v(" "),i("span",[e._v("新增")])],1)],1),e._v(" "),i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data_1,stripe:"",border:"",size:"mini","min-height":"840px"}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"role_name",label:"权限组"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("203"),expression:"permission.indexOf('203') != -1"}],attrs:{size:"mini",type:"primary"},on:{click:function(i){e.amend(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.permission.indexOf("204"),expression:"permission.indexOf('204') != -1"}],attrs:{size:"mini",type:"danger"},on:{click:function(i){e.deletes(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[i("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.showModel,expression:"showModel == 2"}]},[i("div",{staticClass:"model_con"},[i("el-row",{staticClass:"model_title",attrs:{align:"bottom"}},[i("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:8}},[e._v("\n\t\t\t\t\t新增权限\n\t\t\t\t")]),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4,offset:12}},[i("el-button",{attrs:{type:"text"},on:{click:function(t){e.cancel_newInfo("new_info")}}},[i("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),1==e.shop_type?i("el-row",[i("el-form",[i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{label:"类型"}},[i("el-radio-group",{on:{change:e.checkRadio},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[i("el-radio",{attrs:{label:"1"}},[e._v("公司")]),e._v(" "),i("el-radio",{attrs:{label:"2"}},[e._v("店铺")])],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:""}},[i("el-select",{on:{change:e.selectShopId},model:{value:e.shop_id,callback:function(t){e.shop_id=t},expression:"shop_id"}},e._l(e.options,function(e,t){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}))],1)],1)],1)],1):e._e(),e._v(" "),i("el-form",{ref:"new_info",attrs:{model:e.new_info,rules:e.new_inforules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"权限组名称",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.new_info.name,callback:function(t){e.$set(e.new_info,"name",t)},expression:"new_info.name"}})],1)],1)],1),e._v(" "),i("el-row",{staticClass:"check_group"},[i("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.checkGroup,function(t,n){return i("el-row",{key:t.id,staticStyle:{"border-bottom":"1px solid #e0e0e0","margin-bottom":"25px"}},[i("el-checkbox",{attrs:{label:t.id},on:{change:function(i){e.check1(i,t)}}},[e._v(e._s(t.name))]),e._v(" "),t.children?i("el-row",{key:t.id,staticStyle:{"padding-left":"25px"}},e._l(t.children,function(n){return i("el-row",{key:n.id,staticStyle:{margin:"15px 0px","padding-left":"25px"}},[i("el-checkbox",{attrs:{label:n.id},on:{change:function(i){e.check2(i,t,n)}}},[e._v(e._s(n.name))]),e._v(" "),i("el-row",{staticStyle:{margin:"15px 0px","padding-left":"25px"}},e._l(n.children,function(s){return i("el-checkbox",{key:s.id,attrs:{label:s.id},on:{change:function(i){e.check3(i,t,n,s)}}},[e._v(e._s(s.name))])}))],1)})):e._e()],1)}))],1),e._v(" "),i("el-row",{staticClass:"bottomButton"},[i("el-form-item",[i("el-button",{attrs:{name:"cancel"},on:{click:function(t){e.resetForm("new_info")}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("new_info")}}},[e._v("保存")])],1)],1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.showModel,expression:"showModel == 3"}]},[i("div",{staticClass:"model_con"},[i("el-row",{staticClass:"model_title",attrs:{align:"bottom"}},[i("el-col",{staticStyle:{"border-left":"#13C2C2 3px solid","padding-left":"15px"},attrs:{span:8}},[e._v("\n\t\t\t\t\t修改权限\n\t\t\t\t")]),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4,offset:12}},[i("el-button",{attrs:{type:"text"},on:{click:e.cancel_amend_newInfo}},[i("svg-icon",{attrs:{"icon-class":"cancel"}})],1)],1)],1),e._v(" "),i("el-form",{ref:"amend_info",attrs:{model:e.amend_info,rules:e.amend_inforules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"权限组名称",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.amend_info.name,callback:function(t){e.$set(e.amend_info,"name",t)},expression:"amend_info.name"}})],1)],1)],1),e._v(" "),i("el-row",{staticClass:"check_group"},[i("el-checkbox-group",{model:{value:e.anemdCheckList,callback:function(t){e.anemdCheckList=t},expression:"anemdCheckList"}},e._l(e.checkGroup,function(t,n){return i("el-row",{key:t.id},[i("el-checkbox",{attrs:{label:t.id},on:{change:function(i){e.check4(i,t)}}},[e._v(e._s(t.name))]),e._v(" "),t.children?i("el-row",{key:t.id,staticStyle:{"padding-left":"25px"}},e._l(t.children,function(n){return i("el-row",{key:n.id,staticStyle:{margin:"15px 0px","padding-left":"25px"}},[i("el-checkbox",{attrs:{label:n.id},on:{change:function(i){e.check5(i,t,n)}}},[e._v(e._s(n.name))]),e._v(" "),i("el-row",{staticStyle:{margin:"15px 0px","padding-left":"25px"}},e._l(n.children,function(s){return i("el-checkbox",{key:s.id,attrs:{label:s.id},on:{change:function(i){e.check6(i,t,n,s)}}},[e._v(e._s(s.name))])}))],1)})):e._e()],1)}))],1),e._v(" "),i("el-row",[i("el-col",{staticClass:"bottomButton",attrs:{span:24}},[i("el-form-item",[i("el-button",{attrs:{name:"cancel"},on:{click:function(t){e.resetamendForm("amend_info")}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitamendForm("amend_info")}}},[e._v("保存")])],1)],1)],1)],1)],1)])])},[],!1,null,"d815718c",null);o.options.__file="Permissionslist.vue";t.default=o.exports},vkHz:function(e,t,i){"use strict";var n=i("dQRe");i.n(n).a}}]);